<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="DNS(Domain Name System,域名系统)用于命名组织到域层次结构中的计算机和网络服务。在Internet上域名与IP地址之间是一对一(或者多对一)的，域名虽然便于人们记以，但是机器之间只能互相认识IP地址，他们之间的转换工作称为域名解析，域名解析需要由专门的服务器来完成，DNS就是进行域名解析的服务器。">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux配置与应用DNS服务">
<meta property="og:url" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;DNS.html">
<meta property="og:site_name" content="嘲弄i">
<meta property="og:description" content="DNS(Domain Name System,域名系统)用于命名组织到域层次结构中的计算机和网络服务。在Internet上域名与IP地址之间是一对一(或者多对一)的，域名虽然便于人们记以，但是机器之间只能互相认识IP地址，他们之间的转换工作称为域名解析，域名解析需要由专门的服务器来完成，DNS就是进行域名解析的服务器。">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;named.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;rfc.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;z.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;f.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;zheng.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;fan.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;name.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;rfc1.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;42.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;43.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;44.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;45.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;47.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;48.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;49.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;46.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;50.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;51.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;named3.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;rfc3.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;yhy.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;bjyhy.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;named4.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;rfc4.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;shyhy.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;pei.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;ce.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;wei.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;jie.png">
<meta property="og:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;ces.png">
<meta property="og:updated_time" content="2019-10-27T08:14:48.093Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;6-7.xyz&#x2F;img&#x2F;dns&#x2F;named.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/McRae.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/McRae.ico" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/McRae.ico">
          
        
    

    <!-- title -->
    <title>Linux配置与应用DNS服务</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/music/">Music</a></li>
         
          <li><a href="https://github.com/X1angfeng" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/VLAN-1.html"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/matlab.html"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://6-7.xyz/DNS.html" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://6-7.xyz/DNS.html&text=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://6-7.xyz/DNS.html&is_video=false&description=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Linux配置与应用DNS服务&body=Check out this article: https://6-7.xyz/DNS.html"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://6-7.xyz/DNS.html&name=Linux配置与应用DNS服务&description=&lt;blockquote&gt;
&lt;p&gt;DNS(Domain Name System,域名系统)用于命名组织到域层次结构中的计算机和网络服务。在Internet上域名与IP地址之间是一对一(或者多对一)的，域名虽然便于人们记以，但是机器之间只能互相认识IP地址，他们之间的转换工作称为域名解析，域名解析需要由专门的服务器来完成，DNS就是进行域名解析的服务器。&lt;/p&gt;
&lt;/blockquote&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#任务一"><span class="toc-number">1.</span> <span class="toc-text">任务一</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置服务器IP地址"><span class="toc-number">1.1.</span> <span class="toc-text">设置服务器IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装DNS软件"><span class="toc-number">1.2.</span> <span class="toc-text">安装DNS软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份配置文件"><span class="toc-number">1.3.</span> <span class="toc-text">备份配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份编辑区域文件"><span class="toc-number">1.4.</span> <span class="toc-text">备份编辑区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立正向查找域文件"><span class="toc-number">1.5.</span> <span class="toc-text">建立正向查找域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立反向查找域文件"><span class="toc-number">1.6.</span> <span class="toc-text">建立反向查找域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重启服务"><span class="toc-number">1.7.</span> <span class="toc-text">重启服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#客户机验证"><span class="toc-number">1.8.</span> <span class="toc-text">客户机验证</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#任务二"><span class="toc-number">2.</span> <span class="toc-text">任务二</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置服务器IP地址-1"><span class="toc-number">2.1.</span> <span class="toc-text">设置服务器IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份配置文件-1"><span class="toc-number">2.2.</span> <span class="toc-text">备份配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份编辑区域文件-1"><span class="toc-number">2.3.</span> <span class="toc-text">备份编辑区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立正向查找域文件-1"><span class="toc-number">2.4.</span> <span class="toc-text">建立正向查找域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重启主服务器"><span class="toc-number">2.5.</span> <span class="toc-text">重启主服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置辅助服务器配置文件"><span class="toc-number">2.6.</span> <span class="toc-text">配置辅助服务器配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份编辑区域文件-2"><span class="toc-number">2.7.</span> <span class="toc-text">备份编辑区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看辅助服务器的复制结果"><span class="toc-number">2.8.</span> <span class="toc-text">查看辅助服务器的复制结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改主服务器配置文件"><span class="toc-number">2.9.</span> <span class="toc-text">修改主服务器配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#客户机测试"><span class="toc-number">2.10.</span> <span class="toc-text">客户机测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#任务三"><span class="toc-number">3.</span> <span class="toc-text">任务三</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#修改主配置文件"><span class="toc-number">3.1.</span> <span class="toc-text">修改主配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#定义正向查找区域文件"><span class="toc-number">3.2.</span> <span class="toc-text">定义正向查找区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#新建区域文件"><span class="toc-number">3.3.</span> <span class="toc-text">新建区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重启服务-1"><span class="toc-number">3.4.</span> <span class="toc-text">重启服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为子域名设置转发"><span class="toc-number">3.5.</span> <span class="toc-text">为子域名设置转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#修改主配置文件-1"><span class="toc-number">3.5.1.</span> <span class="toc-text">修改主配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义正向查找区域文件-1"><span class="toc-number">3.5.2.</span> <span class="toc-text">定义正向查找区域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新建区域文件-1"><span class="toc-number">3.5.3.</span> <span class="toc-text">新建区域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重启服务-2"><span class="toc-number">3.5.4.</span> <span class="toc-text">重启服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#子域的测试配置"><span class="toc-number">3.6.</span> <span class="toc-text">子域的测试配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#子域的查询测试"><span class="toc-number">3.7.</span> <span class="toc-text">子域的查询测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#委派设置"><span class="toc-number">3.8.</span> <span class="toc-text">委派设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#委派测试设置"><span class="toc-number">3.9.</span> <span class="toc-text">委派测试设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试机测试"><span class="toc-number">3.10.</span> <span class="toc-text">测试机测试</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Linux配置与应用DNS服务
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">嘲弄i</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-04-10T12:55:03.000Z" itemprop="datePublished">2019-04-10</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Linux/">Linux</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Linux/" rel="tag">Linux</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <blockquote>
<p>DNS(Domain Name System,域名系统)用于命名组织到域层次结构中的计算机和网络服务。在Internet上域名与IP地址之间是一对一(或者多对一)的，域名虽然便于人们记以，但是机器之间只能互相认识IP地址，他们之间的转换工作称为域名解析，域名解析需要由专门的服务器来完成，DNS就是进行域名解析的服务器。</p>
</blockquote>
<a id="more"></a>

<h1 id="任务一"><a href="#任务一" class="headerlink" title="任务一"></a>任务一</h1><p><code>安装与配置基本的DNS服务器</code></p>
<p><span id="inline-blue">背景</span></p>
<p>为公司配置一台DNS服务器，其IP地址为192.168.136.156，具体要求如下。</p>
<p>设置该区域的SOA记录，主域名服务器为ns.yhy.com。维护该域的管理员邮箱地址为<a href="mailto:admin@yhy.com" target="_blank" rel="noopener">admin@yhy.com</a>,当前区域信息的版本号、刷新时间等为默认值。</p>
<p>该区域的ns记录：ns.yhy.com</p>
<p>该区域的A记录：主机名为ns，对应的解析IP为192.168.136.100</p>
<p>该区域的A记录：主机名为web1，对应的解析IP为192.168.136.100</p>
<p>该区域的A记录：主机名为web2，对应的解析IP为192.168.136.100</p>
<p>该区域的nx记录：对应的解析IP为mail.yhy.com,优先级为5</p>
<p>该区域的别名记录：别名为mail，对应的主机为ns</p>
<p>该区域的别名记录：别名为www，对应的主机为ns</p>
<p>该区域的别名记录：别名为ftp，对应的主机为ns</p>
<p>并对应作反向解析。</p>
<h2 id="设置服务器IP地址"><a href="#设置服务器IP地址" class="headerlink" title="设置服务器IP地址"></a>设置服务器IP地址</h2><p>使用setup命令或者<code>vim /etc/sysconfig/network-scripts/ifcfg-eth0</code>配置完成后，<code>service network restart</code>重启网络</p>
<h2 id="安装DNS软件"><a href="#安装DNS软件" class="headerlink" title="安装DNS软件"></a>安装DNS软件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install bind -y</span><br><span class="line">yum install bind-chroot -y</span><br></pre></td></tr></table></figure>

<h2 id="备份配置文件"><a href="#备份配置文件" class="headerlink" title="备份配置文件"></a>备份配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -p /etc/named.conf /etc/named.conf.bak   #加参数p表示权限不变</span><br><span class="line">vim /etc/named.conf</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/named.png" alt=""></p>
<h2 id="备份编辑区域文件"><a href="#备份编辑区域文件" class="headerlink" title="备份编辑区域文件"></a>备份编辑区域文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -p /etc/named.rfc1912.zones /etc/named.rfc1912.zones.bak</span><br><span class="line">vim /etc/named.rfc1912.zones</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/rfc.png" alt=""></p>
<h2 id="建立正向查找域文件"><a href="#建立正向查找域文件" class="headerlink" title="建立正向查找域文件"></a>建立正向查找域文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /var/named/</span><br><span class="line">cp -p named.localhost yhy.z</span><br><span class="line">vim yhy.z</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/z.png" alt=""></p>
<h2 id="建立反向查找域文件"><a href="#建立反向查找域文件" class="headerlink" title="建立反向查找域文件"></a>建立反向查找域文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -p yhy.z yhy.f</span><br><span class="line">vim yhy.f</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/f.png" alt=""></p>
<h2 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service named restart  #重启</span><br><span class="line">chkconfig named on     #开机启动</span><br></pre></td></tr></table></figure>

<p><span id="inline-blue">注意</span>此处需要关闭防火墙<code>service iptables stop</code></p>
<h2 id="客户机验证"><a href="#客户机验证" class="headerlink" title="客户机验证"></a>客户机验证</h2><p>在客户机中配置DNS指向DNS服务器，配置客户机DNS。使用<code>vim /etc/resolv.conf</code>在文档尾部加入如下内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameserver 192.168.136.156</span><br></pre></td></tr></table></figure>

<p><span id="inline-purple">正向查找域验证结果</span></p>
<p><img src="/img/dns/zheng.png" alt=""></p>
<p>反向查找域验证结果</p>
<p><img src="/img/dns/fan.png" alt=""></p>
<p><code>至此，DNS服务器搭建测试完毕。</code></p>
<h1 id="任务二"><a href="#任务二" class="headerlink" title="任务二"></a>任务二</h1><p><code>搭建辅助作用域DNS服务器</code></p>
<p>DNS辅助服务器（slave)是一种容错设计，考虑的是一旦DNS主服务器出现故障或因负载太重无法及时响应客户机请求，辅助服务器将挺身而出为主服务器排忧解难。辅助服务器的区域数据都是从主服务器复制而来的，因此辅助服务器的数据都是只读的。当然，如果有必要，可以直接将辅助服务器升级为主服务器。</p>
<p><code>搭建辅助服务器的好处</code></p>
<p>(1)辅助DNS服务器提供区域冗余，能够在这个区域的主服务器停止响应的情况下为客户端解析这个区域的DNS名称。</p>
<p>(2)辅助DNS服务器可以减少DNS网络通信量，采用分布式结构，在低速广域网链路中添加辅助DNS服务器能有效地管理和减少网络通信量</p>
<p>(3)辅助DNS服务器可以用于减少区域的主服务器的负载。</p>
<p><span id="inline-pink">要求</span>搭建一台辅助DNS服务器，其具体的参数配置如下：域名为yhy.com;主区域服务器IP为192.168.30.128；辅助区域IP为192.168.30.129.</p>
<h2 id="设置服务器IP地址-1"><a href="#设置服务器IP地址-1" class="headerlink" title="设置服务器IP地址"></a>设置服务器IP地址</h2><p>使用setup命令或者<code>vim /etc/sysconfig/network-scripts/ifcfg-eth0</code>配置完成后，<code>service network restart</code>重启网络</p>
<h2 id="备份配置文件-1"><a href="#备份配置文件-1" class="headerlink" title="备份配置文件"></a>备份配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -p /etc/named.conf /etc/named.conf.bak   #加参数p表示权限不变</span><br><span class="line">vim /etc/named.conf</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/name.png" alt=""></p>
<h2 id="备份编辑区域文件-1"><a href="#备份编辑区域文件-1" class="headerlink" title="备份编辑区域文件"></a>备份编辑区域文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -p /etc/named.rfc1912.zones /etc/named.rfc1912.zones.bak</span><br><span class="line">vim /etc/named.rfc1912.zones</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/rfc1.png" alt=""></p>
<h2 id="建立正向查找域文件-1"><a href="#建立正向查找域文件-1" class="headerlink" title="建立正向查找域文件"></a>建立正向查找域文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /var/named/</span><br><span class="line">cp -p named.localhost yhy.z</span><br><span class="line">vim yhy.z</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/42.png" alt=""></p>
<h2 id="重启主服务器"><a href="#重启主服务器" class="headerlink" title="重启主服务器"></a>重启主服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service named restart</span><br></pre></td></tr></table></figure>

<h2 id="配置辅助服务器配置文件"><a href="#配置辅助服务器配置文件" class="headerlink" title="配置辅助服务器配置文件"></a>配置辅助服务器配置文件</h2><p>辅助服务器与主服务器配置一样，区别就是不需要再options中加allow-transfer{}</p>
<p><img src="/img/dns/43.png" alt=""></p>
<h2 id="备份编辑区域文件-2"><a href="#备份编辑区域文件-2" class="headerlink" title="备份编辑区域文件"></a>备份编辑区域文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -p /etc/named.rfc1912.zones /etc/named.rfc1912.zones.bak</span><br><span class="line">vim /etc/named.rfc1912.zones</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/44.png" alt=""></p>
<blockquote>
<p>此处要将默认的allow-update{none；}；删除文件的位置默认在slave下，也可在其他目录下。但是必须保证目录所有者和所属组是<code>named</code>，否则无法从主区域传输DNS信息。</p>
</blockquote>
<h2 id="查看辅助服务器的复制结果"><a href="#查看辅助服务器的复制结果" class="headerlink" title="查看辅助服务器的复制结果"></a>查看辅助服务器的复制结果</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service named restart</span><br><span class="line">cd /var/named/slaves</span><br><span class="line">ls -l</span><br><span class="line">cat yhy.z</span><br></pre></td></tr></table></figure>

<p>当重启服务器后，等待几分钟。</p>
<p><img src="/img/dns/45.png" alt=""></p>
<p>此时我们可以使用<code>nslookup</code>进行验证，这里我在Linux以及win7下均做了验证截图如下</p>
<p><span id="inline-blue">Windows7</span></p>
<p><img src="/img/dns/47.png" alt=""></p>
<p><span id="inline-pink">Linux</span></p>
<p><img src="/img/dns/48.png" alt=""></p>
<p>至此已经验证完成(๑′ᴗ‵๑)Ｉ Lᵒᵛᵉᵧₒᵤ❤，继续进行下一步操作。</p>
<h2 id="修改主服务器配置文件"><a href="#修改主服务器配置文件" class="headerlink" title="修改主服务器配置文件"></a>修改主服务器配置文件</h2><p>修改主服务器配置文件，以做更新测试。将SOA记录中的序列号增大，否则辅助服务器无法得知主区域记录发生了改变。</p>
<p><img src="/img/dns/49.png" alt=""></p>
<h2 id="客户机测试"><a href="#客户机测试" class="headerlink" title="客户机测试"></a>客户机测试</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service named restart</span><br><span class="line">cd /var/named/slaves</span><br><span class="line">ls -l</span><br><span class="line">cat yhy.z</span><br></pre></td></tr></table></figure>

<p>当重启服务器后，等待几分钟。发现文件大小发生了变化，内容也发生了变化。</p>
<p><img src="/img/dns/46.png" alt=""></p>
<p>使用<code>nslookup</code>测试新增加的记录。</p>
<p><span id="inline-blue">Windows7</span></p>
<p><img src="/img/dns/50.png" alt=""></p>
<p><span id="inline-pink">Linux</span></p>
<p><img src="/img/dns/51.png" alt=""></p>
<h1 id="任务三"><a href="#任务三" class="headerlink" title="任务三"></a>任务三</h1><p><code>搭建转发与委派DNS服务器</code></p>
<p><span id="inline-blue">背景</span>某公司总部在北京，主域名为yhy.com,北京的子域bj.yhy.com也建在主域的DNS服务器上,而要想远在上海的子域sh.yhy.com也能够正常解析主区域的域名，则需要通过转发来实现，而在北京的主机想通过主DNS查询到子域的域名则需要通过委派来实现，具体工程拓扑图如下所示。</p>
<p><code>备注</code>:</p>
<p>(1)转发:可以分为完全转发和条件转发</p>
<p>①完全转发:将客户端所有DNS查询以递归的方式转发到指定的DNS服务器。</p>
<p>②条件转发：将指定的DNS拓展名的查询转发到指定的DNS服务器。</p>
<p>(2)委派：在Bind中可以将某个子域的查询工作委派给另一个DNS服务器完成。</p>
<h2 id="修改主配置文件"><a href="#修改主配置文件" class="headerlink" title="修改主配置文件"></a>修改主配置文件</h2><p>这里如任务一中的一样，修改DNS配置文件<code>/etc/named.conf</code>，使其能够对外提供DNS查询服务。</p>
<p><img src="/img/dns/named3.png" alt=""></p>
<h2 id="定义正向查找区域文件"><a href="#定义正向查找区域文件" class="headerlink" title="定义正向查找区域文件"></a>定义正向查找区域文件</h2><p>编辑<code>/etc/named.rfc1912.zones</code>文件，添加如下图所示内容</p>
<p><img src="/img/dns/rfc3.png" alt=""></p>
<h2 id="新建区域文件"><a href="#新建区域文件" class="headerlink" title="新建区域文件"></a>新建区域文件</h2><p>使用如下命令创建北京主域yhy.com的正向查找区域文件,具体内容如图所示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /var/named/yhy.z</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/yhy.png" alt=""></p>
<p>使用如下命令创建北京子域bj.yhy.com的正向查找区域文件,具体内容如图所示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /var/named/bj.yhy.z</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/bjyhy.png" alt=""></p>
<h2 id="重启服务-1"><a href="#重启服务-1" class="headerlink" title="重启服务"></a>重启服务</h2><p>使用<code>service named restart</code>命令重启DNS服务，使修改的配置生效。</p>
<h2 id="为子域名设置转发"><a href="#为子域名设置转发" class="headerlink" title="为子域名设置转发"></a>为子域名设置转发</h2><h3 id="修改主配置文件-1"><a href="#修改主配置文件-1" class="headerlink" title="修改主配置文件"></a>修改主配置文件</h3><p>为子域名设置转发，修改DNS配置文件<code>/etc/named.conf</code>。</p>
<p><img src="/img/dns/named4.png" alt=""></p>
<p><span id="inline-pink">完全转发</span></p>
<h3 id="定义正向查找区域文件-1"><a href="#定义正向查找区域文件-1" class="headerlink" title="定义正向查找区域文件"></a>定义正向查找区域文件</h3><p>编辑<code>/etc/named.rfc1912.zones</code>文件，添加如下图所示内容</p>
<p><img src="/img/dns/rfc4.png" alt=""></p>
<p><span id="inline-blue">条件转发</span></p>
<h3 id="新建区域文件-1"><a href="#新建区域文件-1" class="headerlink" title="新建区域文件"></a>新建区域文件</h3><p>使用如下命令创建上海子域sh.yhy.com的正向查找区域文件,具体内容如图所示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /var/named/sh.yhy.z</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/shyhy.png" alt=""></p>
<h3 id="重启服务-2"><a href="#重启服务-2" class="headerlink" title="重启服务"></a>重启服务</h3><p>使用<code>service named restart</code>命令重启DNS服务，使修改的配置生效。</p>
<h2 id="子域的测试配置"><a href="#子域的测试配置" class="headerlink" title="子域的测试配置"></a>子域的测试配置</h2><p>修改测试机的IP地址为<code>192.168.30.130</code>,DNS改为<code>192.168.30.129</code>，即子域名的DNS服务器的IP地址。</p>
<p><img src="/img/dns/pei.png" alt=""></p>
<h2 id="子域的查询测试"><a href="#子域的查询测试" class="headerlink" title="子域的查询测试"></a>子域的查询测试</h2><p><span id="inline-yellow">注意</span>在测试之前关掉服务器上的防火墙以及selinux</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">serveice iptables stop</span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>

<p><img src="/img/dns/ce.png" alt=""></p>
<h2 id="委派设置"><a href="#委派设置" class="headerlink" title="委派设置"></a>委派设置</h2><p>在主区域的正向查找域文件内添加如下图所示的内容，即对sh.yhy.com域的查询委派为上海子域192.168.30.129</p>
<p><img src="/img/dns/wei.png" alt=""></p>
<p>在这里还需给主域以及子域的named.conf中的两行内容做如下配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dnssec-enable no;</span><br><span class="line">dnssec-validation no;</span><br></pre></td></tr></table></figure>

<p>之前为yes，这里把它改为no。</p>
<p>然后<code>service named restart</code>重启DNS服务</p>
<h2 id="委派测试设置"><a href="#委派测试设置" class="headerlink" title="委派测试设置"></a>委派测试设置</h2><p><img src="/img/dns/jie.png" alt=""></p>
<h2 id="测试机测试"><a href="#测试机测试" class="headerlink" title="测试机测试"></a>测试机测试</h2><p>在cmd下用nslookup来进行测试，最终结果如下图所示。</p>
<p><img src="/img/dns/ces.png" alt=""></p>

  </div>
</article>




        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/music/">Music</a></li>
         
          <li><a href="https://github.com/X1angfeng" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#任务一"><span class="toc-number">1.</span> <span class="toc-text">任务一</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置服务器IP地址"><span class="toc-number">1.1.</span> <span class="toc-text">设置服务器IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装DNS软件"><span class="toc-number">1.2.</span> <span class="toc-text">安装DNS软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份配置文件"><span class="toc-number">1.3.</span> <span class="toc-text">备份配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份编辑区域文件"><span class="toc-number">1.4.</span> <span class="toc-text">备份编辑区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立正向查找域文件"><span class="toc-number">1.5.</span> <span class="toc-text">建立正向查找域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立反向查找域文件"><span class="toc-number">1.6.</span> <span class="toc-text">建立反向查找域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重启服务"><span class="toc-number">1.7.</span> <span class="toc-text">重启服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#客户机验证"><span class="toc-number">1.8.</span> <span class="toc-text">客户机验证</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#任务二"><span class="toc-number">2.</span> <span class="toc-text">任务二</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#设置服务器IP地址-1"><span class="toc-number">2.1.</span> <span class="toc-text">设置服务器IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份配置文件-1"><span class="toc-number">2.2.</span> <span class="toc-text">备份配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份编辑区域文件-1"><span class="toc-number">2.3.</span> <span class="toc-text">备份编辑区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立正向查找域文件-1"><span class="toc-number">2.4.</span> <span class="toc-text">建立正向查找域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重启主服务器"><span class="toc-number">2.5.</span> <span class="toc-text">重启主服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置辅助服务器配置文件"><span class="toc-number">2.6.</span> <span class="toc-text">配置辅助服务器配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#备份编辑区域文件-2"><span class="toc-number">2.7.</span> <span class="toc-text">备份编辑区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看辅助服务器的复制结果"><span class="toc-number">2.8.</span> <span class="toc-text">查看辅助服务器的复制结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改主服务器配置文件"><span class="toc-number">2.9.</span> <span class="toc-text">修改主服务器配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#客户机测试"><span class="toc-number">2.10.</span> <span class="toc-text">客户机测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#任务三"><span class="toc-number">3.</span> <span class="toc-text">任务三</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#修改主配置文件"><span class="toc-number">3.1.</span> <span class="toc-text">修改主配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#定义正向查找区域文件"><span class="toc-number">3.2.</span> <span class="toc-text">定义正向查找区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#新建区域文件"><span class="toc-number">3.3.</span> <span class="toc-text">新建区域文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重启服务-1"><span class="toc-number">3.4.</span> <span class="toc-text">重启服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为子域名设置转发"><span class="toc-number">3.5.</span> <span class="toc-text">为子域名设置转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#修改主配置文件-1"><span class="toc-number">3.5.1.</span> <span class="toc-text">修改主配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义正向查找区域文件-1"><span class="toc-number">3.5.2.</span> <span class="toc-text">定义正向查找区域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新建区域文件-1"><span class="toc-number">3.5.3.</span> <span class="toc-text">新建区域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重启服务-2"><span class="toc-number">3.5.4.</span> <span class="toc-text">重启服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#子域的测试配置"><span class="toc-number">3.6.</span> <span class="toc-text">子域的测试配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#子域的查询测试"><span class="toc-number">3.7.</span> <span class="toc-text">子域的查询测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#委派设置"><span class="toc-number">3.8.</span> <span class="toc-text">委派设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#委派测试设置"><span class="toc-number">3.9.</span> <span class="toc-text">委派测试设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试机测试"><span class="toc-number">3.10.</span> <span class="toc-text">测试机测试</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://6-7.xyz/DNS.html" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://6-7.xyz/DNS.html&text=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://6-7.xyz/DNS.html&is_video=false&description=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Linux配置与应用DNS服务&body=Check out this article: https://6-7.xyz/DNS.html"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://6-7.xyz/DNS.html&title=Linux配置与应用DNS服务" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://6-7.xyz/DNS.html&name=Linux配置与应用DNS服务&description=&lt;blockquote&gt;
&lt;p&gt;DNS(Domain Name System,域名系统)用于命名组织到域层次结构中的计算机和网络服务。在Internet上域名与IP地址之间是一对一(或者多对一)的，域名虽然便于人们记以，但是机器之间只能互相认识IP地址，他们之间的转换工作称为域名解析，域名解析需要由专门的服务器来完成，DNS就是进行域名解析的服务器。&lt;/p&gt;
&lt;/blockquote&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 嘲弄i
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
         
          <li><a href="/music/">Music</a></li>
         
          <li><a href="https://github.com/X1angfeng" target="_blank" rel="noopener">Projects</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->






   

    </script>
</body>
</html>
