<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="web服务器采用浏览器&#x2F;服务器(B&#x2F;S)模型，浏览器用于解释和显示web页面，响应用户的输入请求，并通过HTTP协议讲用户请求的数据传递给web服务器。web服务器默认是使用80端口为客户机的浏览器提供浏览服务，浏览器使用HTTP发送请求，浏览器与服务器建立连接后，服务器查找到文档后将文档回传给客户机浏览器。">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux配置与应用web服务">
<meta property="og:url" content="https:&#x2F;&#x2F;521.ooo&#x2F;%F0%9F%98%98.html">
<meta property="og:site_name" content="嘲弄i">
<meta property="og:description" content="web服务器采用浏览器&#x2F;服务器(B&#x2F;S)模型，浏览器用于解释和显示web页面，响应用户的输入请求，并通过HTTP协议讲用户请求的数据传递给web服务器。web服务器默认是使用80端口为客户机的浏览器提供浏览服务，浏览器使用HTTP发送请求，浏览器与服务器建立连接后，服务器查找到文档后将文档回传给客户机浏览器。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;1.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;4.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;2.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;3.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;16.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;17.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;18.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;19.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;20.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;5.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;6.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;7.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;10.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;8.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;9.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;11.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;12.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;13.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;14.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;15.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;my.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;24.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;25.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;21.png">
<meta property="og:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;23.png">
<meta property="og:updated_time" content="2019-05-04T11:38:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;521.ooo&#x2F;img&#x2F;web&#x2F;1.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/McRae.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/McRae.ico" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/McRae.ico">
          
        
    
    <!-- title -->
    <title>Linux配置与应用web服务</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- third-party styles -->
    <!-- share-js -->

  <link rel="stylesheet" href="/lib/share-js/css/share.min.css">


<link rel="stylesheet" href="/lib/lightbox2/css/lightbox.min.css">

    <!-- rss -->
    
    

    <!--跳动-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css">
</head>

<body class="max-width mx-auto px3 ">
    
      <div id="header-post">
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <div id="nav">
    <div id="nav-items">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">文章</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/music/">音乐</a></li>
         
          <li><a href="/photos/">相册</a></li>
         
          <li><a href="/search/">搜索</a></li>
         
          <li><a href="/atom.xml">订阅</a></li>
        
      </ul>
    </div>
    <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  </div>
  <div id="menu">
    <div id="actions">
      <ul>
        
        <li><a class="icon" href="/%F0%9F%91%B9.html"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/dw.html"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务一</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Apache"><span class="toc-text">安装Apache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置Apache开机自启"><span class="toc-text">设置Apache开机自启</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动Apache"><span class="toc-text">启动Apache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#发布一个简单的网页"><span class="toc-text">发布一个简单的网页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装PHP"><span class="toc-text">安装PHP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Mysql"><span class="toc-text">安装Mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开机启动"><span class="toc-text">开机启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动服务"><span class="toc-text">启动服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改数据库root用户密码"><span class="toc-text">修改数据库root用户密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看Mysql的主要配置文件"><span class="toc-text">查看Mysql的主要配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装PHPmyadmin"><span class="toc-text">安装PHPmyadmin</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务二</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置单网卡多IP地址"><span class="toc-text">配置单网卡多IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立网站主目录与主页文件"><span class="toc-text">建立网站主目录与主页文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编辑配置文件"><span class="toc-text">编辑配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试"><span class="toc-text">测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置DNS服务"><span class="toc-text">配置DNS服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#httpd-conf配置文件的组成"><span class="toc-text">httpd.conf配置文件的组成</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务三</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#网站搭建DNS服务器"><span class="toc-text">网站搭建DNS服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑配置文件-v2"><span class="toc-text">编辑配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑区域文件"><span class="toc-text">编辑区域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#建立正向查找域文件"><span class="toc-text">建立正向查找域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重启服务"><span class="toc-text">重启服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#搭建网站"><span class="toc-text">搭建网站</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建网站主目录和主页文件"><span class="toc-text">创建网站主目录和主页文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑配置文件-v3"><span class="toc-text">编辑配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试-v2"><span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务四</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Apache-SSL支持模块"><span class="toc-text">安装Apache  SSL支持模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成证书"><span class="toc-text">生成证书</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试HTTPS访问结果"><span class="toc-text">测试HTTPS访问结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#强制apache-web服务器始终使用https"><span class="toc-text">强制apache web服务器始终使用https</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务五</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#建立相关目录及文件"><span class="toc-text">建立相关目录及文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立允许访问认证网站的用户"><span class="toc-text">建立允许访问认证网站的用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置http-conf文件"><span class="toc-text">配置http.conf文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试-v3"><span class="toc-text">测试</span></a></li></ol></li></ol>
    </div>
  </div>
</div>

    
    <div class="wrapper index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Linux配置与应用web服务
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">嘲弄i</span>
      </span>
      
  
    <div class="postdate">
      <i class="fas fa-calendar"></i>
      发表于 <time datetime="2019-05-04T11:38:15.000Z" itemprop="datePublished">2019年05月04日</time>
    </div>
    
   |
    <i class="far fa-file-word fa-fw"></i>
    文章字数:<span class="post-count">4.2k</span>
    |
    <i class="far fa-clock fa-fw"></i>
    阅读时长:<span class="post-count">17</span>min
 <!--|
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <i class="far fa-eye fa-fw"></i>
    <span > 阅读次数:<span id="busuanzi_value_site_pv"></span>次</span>
-->
  


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Linux/">Linux</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Linux/" rel="tag">Linux</a>
    </div>


    </div>
    
  
    
    
      <div class="outdated-warn">
        <i class="fas fa-exclamation-circle"></i>
        这是一篇更新于 457 天前的文章，其中的信息可能已经有所发展或是发生改变。
      </div>
    
  

  
  </header>
  

  <div class="content" itemprop="articleBody">
    <blockquote>
<p>web服务器采用浏览器/服务器(B/S)模型，浏览器用于解释和显示web页面，响应用户的输入请求，并通过HTTP协议讲用户请求的数据传递给web服务器。web服务器默认是使用80端口为客户机的浏览器提供浏览服务，浏览器使用HTTP发送请求，浏览器与服务器建立连接后，服务器查找到文档后将文档回传给客户机浏览器。</p>
</blockquote>
<a id="more"></a>
<h1>任务一</h1>
<p><code>安装与配置完美的LAMP服务器</code></p>
<p><span id="inline-blue">任务说明</span>Web服务器又乘www服务器，是放置一般网站的服务器。一台web服务器上可以来建立多个网站，各个网站的拥有者只需要把做好的网页和相关文件放置在web服务器的网站中，其他用户就可以用浏览器访问网站中做好的网页了。LAMP是Linux、Apache、Mysql、PHP组合的简称，公司现因业务发展的需要，需要搭建一台自己的web服务器，用以存放公司的门户网站。要求服务器支持Mysql数据库以及PHP的动态网站，服务器IP地址为192.168.30.128</p>
<h2 id="安装Apache">安装Apache</h2>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> httpd -y</span><br></pre></td></tr></table></figure>
<h2 id="设置Apache开机自启">设置Apache开机自启</h2>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chkconfig</span> --levels <span class="number">235</span> httpd <span class="literal">on</span></span><br></pre></td></tr></table></figure>
<h2 id="启动Apache">启动Apache</h2>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd <span class="literal">start</span></span><br></pre></td></tr></table></figure>
<p>启动后在浏览器中输入ip地址会看到一个centos的Apache的测试界面。</p>
<p><code>注意:</code>若启动提示错误(🙅‍不影响访问)可以使用<code>vim /etc/httpd/conf/httpd.conf</code>命令修改配置文件，找到“ServerName”字样，在下面添加如下内容</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerName localhost:<span class="number">80</span></span><br></pre></td></tr></table></figure>
<h2 id="发布一个简单的网页">发布一个简单的网页</h2>
<p>使用<code>mkdir -p /www/yhy</code>创建存放网站的文件夹，使用<code>echo &quot;Hello world&quot;&gt;/www/yhy/index.html</code>创建主页文件。当然准确的来说这样创建html文件不是很正规的，不过只是测试而已无伤大雅🤪。使用<code>vim /etc/httpd/conf/httpd.conf</code>编辑配置文件在最后加入如下内容</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost * :80&gt;</span></span><br><span class="line">4<span class="attribute"><span class="nomarkup">DocumentRoot</span></span> /www/yhy</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure>
<p>在浏览器中输入IP地址访问测试主页，出现Hello world字样则说明成功。</p>
<p><span id="inline-blue">注意</span>我们需要要关闭防火墙以及SELinux</p>
<h2 id="安装PHP">安装PHP</h2>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y php</span><br><span class="line">yum <span class="keyword">install</span> -y php-mbstring</span><br></pre></td></tr></table></figure>
<p>使用<code>vim /etc/httpd/conf/http.conf</code>编辑配置文件在DirectoryIndex那一行添加index.php保存退出</p>
<p>修改网站文件夹下的index.html的名字，然后建立index.php文件中内容如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span> phpinfo();<span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>刷新浏览器可以看到php的支持界面。</p>
<h2 id="安装Mysql">安装Mysql</h2>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> mysql-<span class="keyword">server</span> mysql mysql-devel -y</span><br></pre></td></tr></table></figure>
<p>要想让PHP支持MySQL，还需要安装php-mysql的安装包可以直接通过<code>yum install -y php-mysql</code>来进行安装。</p>
<h3 id="开机启动">开机启动</h3>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chkconfig</span> --levels <span class="number">235</span> mysqld <span class="literal">on</span></span><br></pre></td></tr></table></figure>
<h3 id="启动服务">启动服务</h3>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld <span class="literal">start</span></span><br></pre></td></tr></table></figure>
<p>当页面显示 <strong>Starting mysqld   [OK]</strong> ，表示MySQL已启动。</p>
<h3 id="修改数据库root用户密码">修改数据库root用户密码</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure>
<p>默认密码是为空的，所以所以提示 <strong>Enter current password for root (enter for none)</strong> 时，输入 <strong>回车（enter）</strong> 就可以。</p>
<p><strong>设置新密码</strong><br>
这里设置新的root密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Set root password? [Y/n] y</span><br><span class="line">New password:</span><br><span class="line">Re-enter new password:</span><br></pre></td></tr></table></figure>
<p><code>注意:</code></p>
<p>1.输入的密码不会显示出来。在真实的生产环境中一定要设置复杂度高的密码，以免被暴力破解。</p>
<p>2.设置 MySQL 根密码仅是保护数据库的最基本措施。在构建或安装数据库驱动的应用程序时，用户通常可以为该应用程序创建数据库服务用户，并避免使用根账户执行除数据库管理以外的操作。</p>
<p>其他设置<br>
下面根据个人偏好来进行设置,没有绝对的要求</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Remove anonymous users? [Y/n] Y                <span class="comment">#是否移除匿名用户</span></span><br><span class="line">Disallow root login remotely? [Y/n] n          <span class="comment">#是否不允许root远程登录</span></span><br><span class="line">Remove <span class="built_in">test</span> database and access to it? [Y/n] n <span class="comment">#是否移除test数据库</span></span><br><span class="line">Reload privilege tables now? [Y/n] y           <span class="comment">#是否重新加载表的权限</span></span><br></pre></td></tr></table></figure>
<p><strong>登录数据库</strong></p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mysql -u root -p</span></span><br></pre></td></tr></table></figure>
<p>可以通过<code>show databases;</code>命令查看系统中的数据库</p>
<h2 id="查看Mysql的主要配置文件">查看Mysql的主要配置文件</h2>
<p>(1)Mysql的主配置文件为/etc/my.cnf</p>
<p>可以通过<code>cat /etc/my.cnf</code>来查看Mysql的主配置文件</p>
<p>(2)Mysql数据库文件的存放位置为<code>/var/lib/mysql</code></p>
<p>(3)创建数据库来验证一下存放的位置。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> yhy;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br></pre></td></tr></table></figure>
<p>或者也可以通过<code>ll /var/lib/mysql</code>来查看Mysql数据库文件的存放位置。</p>
<p>(4)数据库的日志输出存放位置</p>
<p>Mysql数据库的一些日志输出存放位置都是在/var/log这个目录下。mysqld.log存放MySQL数据库的一些日志信息。</p>
<p>(5)MySQL数据库是可以通过网络来访问的，其实用的协议是TCP/IP协议，MySQL数据库绑定的端口号为3306。可以使用<code>netstat  -anp |grep mysqld</code>来查看。</p>
<p><img src="/img/web/1.png" alt=""></p>
<h2 id="安装PHPmyadmin">安装PHPmyadmin</h2>
<p><span id="inline-yellow">介绍:</span>phpMyAdmin是一个以PHP为基础，以web-Base方式架构在网站主机上的MySQL数据库管理工具。他不仅可以管理整个MySQL服务器，而且也可以管理单个数据库。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /www/yhy	</span><br><span class="line">wget http:<span class="comment">//oss.aliyuncs.com/aliyunecs/onekey/phpMyAdmin-4.1.8-all-languages.zip</span></span><br><span class="line">unzip phpMyAdmin<span class="number">-4.1</span><span class="number">.8</span>-all-languages.zip </span><br><span class="line">mv phpMyAdmin<span class="number">-4.1</span><span class="number">.8</span>-all-languages phpmyadmin</span><br></pre></td></tr></table></figure>
<p>在浏览器中输入IP地址/phpmyadmin,然后会出现一个登录的界面。输入自己的数据库账号密码可以登录进去对数据库进行管理。具体如下图所示。</p>
<p><img src="/img/web/4.png" alt=""></p>
<p>(6)添加允许访问的端口<code>21:ftp ,80:http</code>命令如下</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -I RH -Firewall -<span class="number">1</span> -INPUT -m <span class="keyword">state</span> -state NEW -m tcp -p tcp -dport <span class="number">21</span> -j ACCEPT</span><br><span class="line">iptables -I RH -Firewall -l -INPUT -m <span class="keyword">state</span> -state NEW -m tcp -p tcp</span><br></pre></td></tr></table></figure>
<p><span id="inline-purple">建议</span>初学者可以使用<code>service iptables stop</code>来关闭防火墙和<code>setenforce 0</code>关闭SELinux来避免出错。但是这样十分不安全，以后的开发中还是要严谨的来，切记不可这样做。</p>
<h1>任务二</h1>
<p><code>配置多虚拟主机服务器</code></p>
<p><span id="inline-blue">要求</span>使用10.0.0.8和10.0.0.9两个IP地址创建基于IP地址的虚拟主机，其中IP地址为10.0.0.8的虚拟主机对应的主目录为/usr/www/web1,IP地址为10.0.0.9的虚拟主机对应的主目录为/usr/www/web2。在DNS服务器中建立web1.yhy.com和web2.yhy.com两个域名，使它们解析到同一个IP地址10.0.0.8上，然后创建基于域名的虚拟主机，其中：域名为web1.yhy.com的虚拟主机对应的主目录为/usr/www/web1，域名为web2.yhy.com的虚拟主机对应的主目录为/usr/www/web2。</p>
<h2 id="配置单网卡多IP地址">配置单网卡多IP地址</h2>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/etc/</span>sysconfig<span class="regexp">/network-scripts/</span></span><br><span class="line">cp ifcfg-eth0 ifcfg-<span class="string">eth0:</span><span class="number">1</span></span><br><span class="line">vim ifcfg-eth0  <span class="comment">//配置eth0的IP地址</span></span><br><span class="line">vim ifcfg-<span class="string">eth0:</span><span class="number">1</span> <span class="comment">//配置eth0:1的IP地址</span></span><br></pre></td></tr></table></figure>
<p>只需修改网卡eth0:1中的以下两项，修改为如下所示：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0:<span class="number">1</span></span><br><span class="line">IPADDR=<span class="number">10.0</span><span class="number">.0</span><span class="number">.9</span></span><br></pre></td></tr></table></figure>
<p>使用<code>service netwrok restart</code>命令重启网络</p>
<h2 id="建立网站主目录与主页文件">建立网站主目录与主页文件</h2>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="meta-keyword">/usr/</span>www/web1</span><br><span class="line">mkdir <span class="meta-keyword">/usr/</span>www/web2</span><br><span class="line">echo <span class="string">"web1"</span>&gt;<span class="meta-keyword">/usr/</span>www<span class="meta-keyword">/web1/</span>index.html</span><br><span class="line">echo <span class="string">"web2"</span>&gt;<span class="meta-keyword">/usr/</span>www<span class="meta-keyword">/web1/</span>index.html</span><br></pre></td></tr></table></figure>
<h2 id="编辑配置文件">编辑配置文件</h2>
<p>使用<code>vim /etc/httpd/conf/http.conf</code>命令配置主配置文件，在最后几行添加如下内容：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost <span class="number">10.0</span><span class="number">.0</span><span class="number">.8</span>:<span class="number">80</span>&gt;</span><br><span class="line">4ServerAdmin <span class="symbol">webmaster@</span>localhost.com</span><br><span class="line">4DocumentRoot /usr/www/web1</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost <span class="number">10.0</span><span class="number">.0</span><span class="number">.9</span>:<span class="number">80</span>&gt;</span><br><span class="line">4ServerAdmin <span class="symbol">webmaster@</span>localhost.com</span><br><span class="line">4DocumentRoot /usr/www/web2</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>编辑完成后<code>:wq</code>保存退出然后重启Apache，使用<code>service httpd restart</code>来重启。</p>
<h2 id="测试">测试</h2>
<p>打开浏览器先后输入<code>10.0.0.8</code>和<code>10.0.0.9</code>来进行测试。测试结果如下所示。</p>
<p><img src="/img/web/2.png" alt=""> <img src="/img/web/3.png" alt=""></p>
<p><code>注意</code>此处的http.conf配置文件其他的设置采用默认即可。如果这个两个IP的端口不同，要在Listen 80下面增加相应的监听端口。</p>
<p><span id="inline-purple">思考❓</span>如何通过web1.yhy.com和web2.yhy.com两个域名来访问相关服务呢？🌈</p>
<h2 id="配置DNS服务">配置DNS服务</h2>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/named.conf</span><br><span class="line">vim /etc/named<span class="selector-class">.rfc1912</span><span class="selector-class">.zones</span></span><br></pre></td></tr></table></figure>
<p>编辑配置文件如下所示<img src="/img/web/16.png" alt=""></p>
<p>在区域文件中添加如下所示内容<img src="/img/web/17.png" alt=""></p>
<p>建立正向查找域名文件</p>
<p>进入目录/var/named下</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -<span class="selector-tag">p</span> named<span class="selector-class">.localhost</span> yhy.zones</span><br><span class="line">vim yhy.zones</span><br></pre></td></tr></table></figure>
<p><img src="/img/web/18.png" alt=""></p>
<p>重启服务关闭防火墙以及selinux</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service named restart</span><br><span class="line">service httpd restart</span><br><span class="line">service iptables stop</span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>
<p><code>测试</code></p>
<p><img src="/img/web/19.png" alt=""><img src="/img/web/20.png" alt=""></p>
<h2 id="httpd-conf配置文件的组成">httpd.conf配置文件的组成</h2>
<p>httpd.conf的配置文件分为三大部分：</p>
<p>(1)全局变量(Global Enviornment)部分:</p>
<p>(2)主服务器配置(Main Server Configuration)部分:</p>
<p>(3)虚拟主机(Virtual Host)部分。</p>
<h1>任务三</h1>
<p><code>配置基于域名的服务器</code></p>
<h2 id="网站搭建DNS服务器">网站搭建DNS服务器</h2>
<p>在这里我们的测试域名为<code>www.yhy.com</code>。</p>
<h3 id="编辑配置文件-v2">编辑配置文件</h3>
<p>首先修改配置文件使用<code>vim /etc/named.conf</code>命令来进行编辑，修改成如下所示</p>
<p><img src="/img/web/5.png" alt=""></p>
<h3 id="编辑区域文件">编辑区域文件</h3>
<p>然后使用<code>vim /etc/named.rfc1912.zones</code>在里面添加如下所示信息</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zone <span class="string">"yhy.com"</span> <span class="keyword">in</span>&#123;</span><br><span class="line">4<span class="built_in">	type </span>master;</span><br><span class="line">44file <span class="string">"yhy.z"</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="建立正向查找域文件">建立正向查找域文件</h3>
<p>进入目录/var/named下</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -<span class="selector-tag">p</span> named<span class="selector-class">.localhost</span> yhy.z</span><br><span class="line">vim yhy.z</span><br></pre></td></tr></table></figure>
<p><img src="/img/web/6.png" alt=""></p>
<h3 id="重启服务">重启服务</h3>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service named restart  <span class="comment">#重启</span></span><br><span class="line">chkconfig named <span class="keyword">on</span>     <span class="comment">#开机启动</span></span><br></pre></td></tr></table></figure>
<h2 id="搭建网站">搭建网站</h2>
<h3 id="创建网站主目录和主页文件">创建网站主目录和主页文件</h3>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="meta-keyword">/www/</span>html/yhy</span><br><span class="line">echo <span class="string">"&lt;h1&gt;yhy.com&lt;/h1&gt;"</span>&gt;<span class="meta-keyword">/www/</span>html<span class="meta-keyword">/yhy/</span>index.html</span><br></pre></td></tr></table></figure>
<h3 id="编辑配置文件-v3">编辑配置文件</h3>
<p>使用<code>vim /etc/httpd/conf/http.conf</code>命令配置主配置文件，在最后几行添加如下内容：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NameVirtualHost <span class="number">192.168</span><span class="number">.30</span><span class="number">.133</span></span><br><span class="line">&lt;VirtualHost <span class="number">192.168</span><span class="number">.30</span><span class="number">.33</span>:<span class="number">80</span>&gt;</span><br><span class="line">4DocumentRoot /www/html/yhy</span><br><span class="line">4ServerName www.yhy.com</span><br><span class="line">4ServerAlias www.dumy-host.yhy.com</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>还有其余一些地方做如下修改，主要是配置文件中的网站主目录。<code>这里采用的方法或许有些不妥</code>有一种为了目的不择手段的感觉😂。但是事实就是应该这样</p>
<p><img src="/img/web/7.png" alt=""></p>
<p>使用<code>service httpd restart</code>命令重启apache服务器。</p>
<h2 id="测试-v2">测试</h2>
<p>在这里选择的是一台windows7作为客户端来进行测试，需要做如下配置。</p>
<p><img src="/img/web/10.png" alt=""></p>
<p>然后打开浏览器在地址栏中输入<code>www.yhy.com</code>和服务器的IP地址<code>192.168.30.133</code>来进行测试。结果如下所示</p>
<p><img src="/img/web/8.png" alt=""><img src="/img/web/9.png" alt=""></p>
<p>根据结果所示我们可以看到谷歌浏览器提示了不安全，这是因为Web服务器在默认情况下，都是使用纯文本协议HTTP，纯文本协议并不会对于传输中的数据进行任何形式的加密，其在安全方面有着重大的缺陷。下面将会web服务器进行https协议进行安全加密。</p>
<h1>任务四</h1>
<p><code>安装配置服务器安全证书</code></p>
<p>为了解决HTTP协议存在的安全隐患，需要在web服务器上部署SSL证书应用HTTPS加密协议。<strong>HTTPS加密协议</strong>是HTTP协议的安全版本，有SSL+HTTP协议构建，可进行加密传输和身份认证。提供至少以下两种保障</p>
<p>(1)确保所有经过服务器传输的数据包都是经过加密的。</p>
<p>(2)对网站服务器真实身份进行认证，避免假冒。</p>
<p>申请HTTPS加密协议首先要到合法的CA机构，申请一张SSL证书。个人站点或者不涉及敏感信息的站点，可以申请免费安全套接字层(SSL)证书；网上银行、购物网站、政府机构等的网站应该购买更高级别的EVSS证书。在保证站点安全数据安全的同时，还可以提高站点服务商的信誉。</p>
<p><span id="inline-yellow">HTTPS</span>实际上采用了Netscape的SSL作为HTTP应用层的子层(HTTPS使用端口443，而不是像HTTP那样使用端口80来进行和TCP/IP的通信)。SSL使用40位关键字作为RC4流加密算法，HTTPS和SSL支持使用X.509数字认证，如果需要的话用户可以确认发送者是谁。</p>
<h2 id="安装Apache-SSL支持模块">安装Apache  SSL支持模块</h2>
<p>使用<code>yum install -y mod_ssl</code>来进行安装，安装后会自动生成<code>/etc/httpd/conf.d/ssl.conf</code>文件</p>
<h2 id="生成证书">生成证书</h2>
<p>(1)生成一个自签名证书</p>
<p>下面的命令可以被用来产生一个自签名的证书。首先，生成2048位的加密私钥。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -<span class="keyword">out</span> ca.key <span class="number">2048</span></span><br></pre></td></tr></table></figure>
<p>(2)生成证书签名请求(CSR)</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -<span class="built_in">new</span> -<span class="built_in">key</span> ca.<span class="built_in">key</span> -out ca.csr</span><br></pre></td></tr></table></figure>
<p><img src="/img/web/11.png" alt=""></p>
<p>(3)生成X509自签名证书</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -days 365 -<span class="keyword">in</span> <span class="keyword">ca</span>.csr -signkey <span class="keyword">ca</span>.key -<span class="keyword">out</span> <span class="keyword">ca</span>.crt</span><br></pre></td></tr></table></figure>
<p><img src="/img/web/12.png" alt=""></p>
<p>(4)修改权限</p>
<p><code>chmod 400 ca.key ca.csr ca.crt</code>修改权限为400，只有拥有者有可读权限。</p>
<p>(5)把创建的证书文件复制到对应的目录</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp ca.key <span class="regexp">/etc/</span>pki<span class="regexp">/tls/</span><span class="keyword">private</span>/</span><br><span class="line">cp ca.csr <span class="regexp">/etc/</span>pki<span class="regexp">/tls/</span><span class="keyword">private</span>/</span><br><span class="line">cp ca.crt <span class="regexp">/etc/</span>pki<span class="regexp">/tls/</span>certs/</span><br></pre></td></tr></table></figure>
<p>(6)设置SSL配置Apache支持HTTPS</p>
<p>使用<code>vim /etc/httpd/conf.d/ssl.conf</code>修改SSL的设置文件，制定<code>www.yhy.com</code>站点HTTPS访问相关信息。内容如下图所示。建议配置前使用<code>cp /etc/httpd/conf.d/ssl.conf /etc/httpd/conf.d/ssl.conf.bak</code>命令进行备份。因为如果不小心配置出错的话，如果头脑不太清晰的话。可能会导致一步错步步错的情况发生，所以进行备份还是上上策。修改后内容如下图所示</p>
<p><img src="/img/web/13.png" alt=""></p>
<p>通过<code>vim /etc/httpd/conf/httpd.conf</code>命令配置网站支持HTTPS，同样建议配置前进行备份。具体内容如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:<span class="number">443</span>&gt;</span><br><span class="line">        SSLEngine on</span><br><span class="line">        SSLCertificateFile /etc/pki/tls/certs/ca.crt</span><br><span class="line">        SSLCertificateKeyFile /etc/pki/tls/private/ca.key</span><br><span class="line">        ServerAdmin admin@yhy.com</span><br><span class="line">        DocumentRoot /var/www/html</span><br><span class="line">        ServerName www<span class="selector-class">.yhy</span><span class="selector-class">.com</span></span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>使用<code>service httpd restart</code>重启apache服务器。</p>
<h2 id="测试HTTPS访问结果">测试HTTPS访问结果</h2>
<p>测试结果如下所示</p>
<p><img src="/img/web/14.png" alt=""></p>
<p>点击继续访问后，可以进到此界面，这里提示我们刚才的证书是不安全的,是因为这本来就已经有人再用了所以会出现这种情况。</p>
<p><img src="/img/web/15.png" alt=""></p>
<h2 id="强制apache-web服务器始终使用https">强制apache web服务器始终使用https</h2>
<p>我们需要做的是将所有的HTTP请求重定向到HTTPS</p>
<p>(1)强制网站使用HTTPS访问，使用<code>vim /etc/httpd/conf/http.conf</code>命令编辑主配置文件。添加如下语句</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServerName www<span class="selector-class">.yhy</span><span class="selector-class">.com</span>:<span class="number">80</span></span><br><span class="line">Redirect permanent / https:<span class="comment">//www.yhy.com</span></span><br></pre></td></tr></table></figure>
<p>(2)强制虚拟主机使用HTTPS，使用<code>vim /etc/httpd/conf/http.conf</code>命令编辑主配置文件。添加如下语句</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServerName www<span class="selector-class">.yhy</span><span class="selector-class">.com</span></span><br><span class="line">Redirect permanent / https:<span class="comment">//www.yhy.com</span></span><br></pre></td></tr></table></figure>
<h1>任务五</h1>
<p><code>配置服务别名与用户认证</code></p>
<p><span id="inline-blue">要求</span></p>
<blockquote>
<ol>
<li><strong>设置网站主目录的路径为/var/www/web</strong></li>
<li>添加index.jsp文件作为默认文档</li>
<li>设置Apache监听端口号为8888</li>
<li>设置默认字符集为GB2312</li>
<li>建立一个名为test的虚拟目录，其对应的物理路径是/usr/local/test，并配置Web服务器允许该虚拟目录浏览和允许内容协商的多重视图特性，仅允许来自网络10.0.0.0网段的客户机的访问</li>
<li>建立一个名为private的虚拟目录，其对应的物理路径为/usr/local/private,并配置Web服务器对该虚拟目录启用用户认证，只允许用户名为abc和xyz的用户访问。</li>
</ol>
</blockquote>
<h2 id="建立相关目录及文件">建立相关目录及文件</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /var/www/web <span class="comment">#建立网站目录</span></span><br><span class="line"><span class="built_in">cd</span> /var/www/web</span><br><span class="line">mkdir <span class="built_in">test</span> private <span class="comment">#在网站主目录下建立虚拟目录</span></span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/<span class="built_in">test</span> <span class="comment">#建立别名目录</span></span><br><span class="line">mkdir -p /usr/<span class="built_in">local</span>/private <span class="comment">#建立认证目录</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"www.yhy.com"</span>&gt;/var/www/web/index.jsp</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"test"</span>&gt;/usr/<span class="built_in">local</span>/<span class="built_in">test</span>/index.jsp</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"private"</span>&gt;/usr/<span class="built_in">local</span>/private/index.jsp</span><br></pre></td></tr></table></figure>
<h2 id="建立允许访问认证网站的用户">建立允许访问认证网站的用户</h2>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">htpasswd -c <span class="meta-keyword">/etc/</span>httpd/mycreatpwd abc</span><br><span class="line">htpasswd -c <span class="meta-keyword">/etc/</span>httpd/mycreatpwd xyz</span><br><span class="line">chmod <span class="number">755</span> <span class="meta-keyword">/etc/</span>httpd/mycreatpwd</span><br></pre></td></tr></table></figure>
<p><code>备注</code>:mycraetpwd文件的权限，设置成用户可以访问就可以，设置权限为755。尽可能不要放在网站的根目录下，防止被人下载。</p>
<p>通过cat命令查看mycraetpwd文件中的内容</p>
<p><img src="/img/web/my.png" alt=""></p>
<h2 id="配置http-conf文件">配置http.conf文件</h2>
<p>使用<code>vim /etc/httpd/conf/httpd.conf</code>修改主配置文件，</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Listen <span class="number">8888</span>	<span class="comment">#在136行，定义服务器端口号</span></span><br><span class="line">DocumentRoot <span class="string">"/var/www/web"</span> <span class="comment">#在292行，定义网站根目录路径</span></span><br><span class="line"><span class="keyword">DirectoryIndex </span>index.<span class="keyword">jsp </span><span class="comment">#在402行，添加默认主页的文件名</span></span><br><span class="line"><span class="keyword">AddDefaultCharest </span>GB2312 <span class="comment">#在759行，添加网站编码</span></span><br></pre></td></tr></table></figure>
<p><code>备注</code>:在vim编辑器中，打开文件后按<code>Esc</code>键后输入<code>:set nu</code>可以显示文件的行号。也可以输入<code>/+关键词</code>来快速查找需要修改的内容。</p>
<p>同时在文档中相应位置，增加如下代码</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Alias</span> /test/ <span class="string">"/usr/local/test/"</span></span><br><span class="line"><span class="section">&lt;Directory "/usr/local/test/"&gt;</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">Options</span></span> Indexes</span><br><span class="line"><span class="attribute"><span class="nomarkup">Order</span></span> allow,deny</span><br><span class="line"><span class="attribute"><span class="nomarkup">Allow</span></span> from 10.0.0.0/8</span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br><span class="line"><span class="attribute">Alias</span> /private <span class="string">"/usr/local/private/"</span></span><br><span class="line"><span class="section">&lt;Directory "/usr/local/private/"&gt;</span></span><br><span class="line"><span class="attribute">Authtype</span> basic</span><br><span class="line"><span class="attribute">AuthName</span> <span class="string">"This is private directory,please login:"</span></span><br><span class="line"><span class="attribute">AuthUserFile</span> <span class="string">"/etc/httpd/mycreatpwd"</span></span><br><span class="line"><span class="attribute">Require</span> user abc xyz </span><br><span class="line"><span class="attribute">AllowOverride</span> <span class="literal">all</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">Order</span></span> allow,deny</span><br><span class="line"><span class="attribute"><span class="nomarkup">Allow</span></span> from 10.0.0.0/8</span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br><span class="line"><span class="section">&lt;VirtualHost www.yhy.com:8888&gt;</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">DocumentRoot</span></span> /var/www/web</span><br><span class="line"><span class="attribute"><span class="nomarkup">ServerName</span></span> www.yhy.com</span><br><span class="line"><span class="attribute">ErrorLog</span> logs/dummy-host.example.com-error_log</span><br><span class="line"><span class="attribute">CustomLog</span> logs/dummy-host.example.com-access_log common</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>备注</code>:使用<code>service iptables stop</code>和<code>setenforce 0</code>关闭防火墙以及SELINUX。然后使用<code>service httpd restart</code>重启服务<code>choconfig --levels 235 httpd on</code>设置开机启动</p>
<h2 id="测试-v3">测试</h2>
<p>在客户机的浏览器中输入<code>www.yhy.com:8888</code></p>
<p><img src="/img/web/24.png" alt=""></p>
<p>在客户机的浏览器中输入<code>www.yhy.com:8888/test</code></p>
<p><img src="/img/web/25.png" alt=""></p>
<p>在客户机的浏览器中输入<code>www.yhy.com:8888/private</code></p>
<p><img src="/img/web/21.png" alt=""><img src="/img/web/23.png" alt=""></p>

  </div>
</article>
<div class="post-footer">
  <div class="post-footer-content content">
    <div class="copyright">
  <dl>
    <dt class="copyright-title">本文标题：</dt>
    <dd class="copyright-descriptioin">Linux配置与应用web服务</dd>
    <dt class="copyright-title">文章作者：</dt>
    <dd class="copyright-item">嘲弄i</dd>
    <dt class="copyright-title">原始链接：</dt>
    <dd class="copyright-item">
      <a 
        href="/%F0%9F%98%98.html"
        title="Linux配置与应用web服务"
        id="permalink"
        >https://521.ooo/%F0%9F%98%98.html</a
      ><a 
         class="btn-copy btn-copy-permalink tooltipped tooltipped-sw"
         aria-label="复制到粘贴板!">
          <i class="fas fa-clipboard"></i>
      </a>
    </dd>
    <dt class="copyright-title">许可协议：</dt>
    <dd class="copyright-item">
      <i class="fab fa-creative-commons"></i>
      <i class="fab fa-creative-commons-by"></i>
      <i class="fab fa-creative-commons-nc"></i>
      <i class="fab fa-creative-commons-nd"></i>
      <a
        rel="license"
        href="https://creativecommons.org/licenses/by-nc-nd/4.0/"
        target="_blank"
        title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)"
        >署名–非商业性使用–禁止演绎 4.0 国际</a
      >，转载请保留原文链接及作者信息。
    </dd>
  </dl>
</div>

  </div>
  <div class="post-footer-thirdparty">
    
    <div class="blog-post-share">
        <div class="share-js-component"></div>
    </div>


    
    <div class="blog-post-comments">
      <section id="comment">
        <div id="valine_container" class="valine_thread"></div>
      </section>
      <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js"></script>

<style>
 .v #veditor{
     min-height: 10rem;
     /*background-image: url(https://cdn.jsdelivr.net/gh/cungudafa/img/images/girls2.png);*/
     background-size: contain;
     background-repeat: no-repeat;
     background-position: right;
     background-color: rgba(255,255,255,0);
     resize: none;}

 /*图片消失
 #veditor:focus{
	background-position-y: 200px;
	transition: all 0.2s ease-in-out 0s;
}  */  
/*头像旋转*/
img.vimg {
     transition: all 1s   /* 旋转时间为 1s */
}

img.vimg:hover {
     transform: rotate(360deg);
     -webkit-transform: rotate(360deg);
     -moz-transform: rotate(360deg);
     -o-transform: rotate(360deg);
     -ms-transform: rotate(360deg);
}

/*调整一下表情高度*/
div.vcontent p  img.vemoji {
    height: 30px;

}
</style>


      <script>
        var GUEST_INFO = ["nick", "mail", "link"];
        var guest_info = "nick,mail,link"
          .split(",")
          .filter(function (item) {
            return GUEST_INFO.indexOf(item) > -1;
          });
        var valine = new Valine();
        valine.init({
          el: "#valine_container",
          admin_email: 'i@1l.fit',
          appId: "j4IbNTx4q1tdh3oT0ewYowik-gzGzoHsz",
          appKey: "xB3fMipwB4nV06yjpad7Ksl9",
          placeholder: "Just go go",
          path: window.location.pathname,
          pageSize: "15",
          avatar: "monsterid",
          lang: "zh-cn",
          pushType: "sc",
          pushLink: "https://sc.ftqq.com/SCU106244T73af1259b7c15e029e4e9ef596dcfd0a5f1312913045a.send",
          enableQQ: true,
          master: '4b278adff5fd7c28aedbf73dd9c52ae5',   //博主邮箱md5  i@1l.fit
          tagMeta: ["博主","小伙伴","访客"],     //标识字段名
          friends:  ["191434ebf724621793c3b2cb237b7e3d","f894d7f51e622407670d7009d9c9f655"],  //小伙伴邮箱Md5
          emojiCDN: "https://mirrorcdn.bili33.top/",
          // 表情title和图片映射
          emojiMaps: {
          "嘿嘿":"https://s-o.oss-cn-shanghai.aliyuncs.com/emoji/%E5%98%BF%E5%98%BF.jpg",    
          "土豆":"https://s-o.oss-cn-shanghai.aliyuncs.com/emoji/tudou.gif",
          "汗_":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200411023456.webp",
          "点赞": "https://cdn.jsdelivr.net/gh/drew233/cdn/kawayi.webp",   
          "傲娇":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200409103906.webp",
          "开心":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200409104757.webp",
          "扣手手":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200409130304.webp",
          "仙女下凡":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200409130301.webp",
          "得瑟":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200409130258.webp",
          "揉左脸":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200409130254.webp",
          "揉右脸":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200409130249.webp",
          "滑稽":"https://cdn.jsdelivr.net/gh/moezx/cdn@3.1.9/img/Sakura/images/smilies/icon_huaji.gif",
          "彩虹滑稽":"https://cdn.jsdelivr.net/gh/drew233/cdn/caihongtiao.webp",
          "呆滞":"https://cdn.jsdelivr.net/gh/drew233/cdn/daizhi.webp",
          "躲进小被子":"https://cdn.jsdelivr.net/gh/drew233/cdn/djxbz.webp",
          "给我也整一个":"https://cdn.jsdelivr.net/gh/drew233/cdn/gwyzyg.webp",
          "草":"https://cdn.jsdelivr.net/gh/drew233/cdn/imgcao.webp",
          "花":"https://cdn.jsdelivr.net/gh/drew233/cdn/imghua.webp",
          "日":"https://cdn.jsdelivr.net/gh/drew233/cdn/imgri.webp",
          "目瞪狗呆":"https://cdn.jsdelivr.net/gh/drew233/cdn/20200412095243.webp",
          "tql":"https://cdn.jsdelivr.net/gh/drew233/cdn/tql.webp",
          "转圈圈":"https://cdn.jsdelivr.net/gh/drew233/cdn/zqq.webp",
          
         
         "tv_doge": "bilibilitv/[tv_doge].png",
         "tv_亲亲": "bilibilitv/[tv_亲亲].png",
         "tv_偷笑": "bilibilitv/[tv_偷笑].png",
         "tv_再见": "bilibilitv/[tv_再见].png",
         "tv_冷漠": "bilibilitv/[tv_冷漠].png",
         "tv_发怒": "bilibilitv/[tv_发怒].png",
         "tv_发财": "bilibilitv/[tv_发财].png",
         "tv_可爱": "bilibilitv/[tv_可爱].png",
         "tv_吐血": "bilibilitv/[tv_吐血].png",
         "tv_呆": "bilibilitv/[tv_呆].png",
         "tv_呕吐": "bilibilitv/[tv_呕吐].png",
         "tv_困": "bilibilitv/[tv_困].png",
         "tv_坏笑": "bilibilitv/[tv_坏笑].png",
         "tv_大佬": "bilibilitv/[tv_大佬].png",
         "tv_大哭": "bilibilitv/[tv_大哭].png",
         "tv_委屈": "bilibilitv/[tv_委屈].png",
         "tv_害羞": "bilibilitv/[tv_害羞].png",
         "tv_尴尬": "bilibilitv/[tv_尴尬].png",
         "tv_微笑": "bilibilitv/[tv_微笑].png",
         "tv_思考": "bilibilitv/[tv_思考].png",
         "tv_惊吓": "bilibilitv/[tv_惊吓].png",
         "tv_打脸": "bilibilitv/[tv_打脸].png",
         "tv_抓狂": "bilibilitv/[tv_抓狂].png",
         "tv_抠鼻": "bilibilitv/[tv_抠鼻].png",
         "tv_斜眼笑": "bilibilitv/[tv_斜眼笑].png",
         "tv_无奈": "bilibilitv/[tv_无奈].png",
         "tv_晕": "bilibilitv/[tv_晕].png",
         "tv_流汗": "bilibilitv/[tv_流汗].png",
         "tv_流泪": "bilibilitv/[tv_流泪].png",
         "tv_流鼻血": "bilibilitv/[tv_流鼻血].png",
         "tv_点赞": "bilibilitv/[tv_点赞].png",
         "tv_生气": "bilibilitv/[tv_生气].png",
         "tv_生病": "bilibilitv/[tv_生病].png",
         "tv_疑问": "bilibilitv/[tv_疑问].png",
         "tv_白眼": "bilibilitv/[tv_白眼].png",
         "tv_皱眉": "bilibilitv/[tv_皱眉].png",
         "tv_目瞪口呆": "bilibilitv/[tv_目瞪口呆].png",
         "tv_睡着": "bilibilitv/[tv_睡着].png",
         "tv_笑哭": "bilibilitv/[tv_笑哭].png",
         "tv_腼腆": "bilibilitv/[tv_腼腆].png",
         "tv_色": "bilibilitv/[tv_色].png",
         "tv_调侃": "bilibilitv/[tv_调侃].png",
         "tv_调皮": "bilibilitv/[tv_调皮].png",
         "tv_鄙视": "bilibilitv/[tv_鄙视].png",
         "tv_闭嘴": "bilibilitv/[tv_闭嘴].png",
         "tv_难过": "bilibilitv/[tv_难过].png",
         "tv_馋": "bilibilitv/[tv_馋].png",
         "tv_鬼脸": "bilibilitv/[tv_鬼脸].png",
         "tv_黑人问号": "bilibilitv/[tv_黑人问号].png",
         "tv_鼓掌": "bilibilitv/[tv_鼓掌].png",
         "卖萌": "bilibili2233/[2233娘_卖萌].png",
         "吃惊": "bilibili2233/[2233娘_吃惊].png",
         "吐魂": "bilibili2233/[2233娘_吐魂].png",
         "喝水": "bilibili2233/[2233娘_喝水].png",
         "困惑": "bilibili2233/[2233娘_困惑].png",
         "大哭": "bilibili2233/[2233娘_大哭].png",
         "大笑": "bilibili2233/[2233娘_大笑].png",
         "委屈": "bilibili2233/[2233娘_委屈].png",
         "怒": "bilibili2233/[2233娘_怒].png",
         "无言": "bilibili2233/[2233娘_无言].png",
         "出汗": "bilibili2233/[2233娘_汗].png",
         "疑问": "bilibili2233/[2233娘_疑问].png",
         "第一": "bilibili2233/[2233娘_第一].png",
         "耶": "bilibili2233/[2233娘_耶].png",
         "郁闷": "bilibili2233/[2233娘_郁闷].png",
         "妙": "bilibiliHotKey/1.jpg",
         "危": "bilibiliHotKey/2.jpg",
         "有内味儿了": "bilibiliHotKey/3.jpg",
         "高产": "bilibiliHotKey/4.jpg",
         "我枯了": "bilibiliHotKey/5.jpg",
         "不愧是你": "bilibiliHotKey/6.jpg",
         "狼火": "bilibiliHotKey/9.jpg",
         "你细品": "bilibiliHotKey/10.jpg",
         "锤": "bilibiliHotKey/11.jpg",
         "秀": "bilibiliHotKey/12.jpg",
         "这次一定": "bilibiliHotKey/14.jpg",
         "酸了": "bilibiliHotKey/15.jpg",
         "打卡": "bilibiliHotKey/16.jpg",
         "我太南了": "bilibiliHotKey/18.jpg",
         "吹爆": "bilibiliHotKey/19.jpg",
         "奥力给": "bilibiliHotKey/20.jpg",
         "awsl": "bilibiliHotKey/21.jpg",
         "猛男必看": "bilibiliHotKey/22.jpg",
         "害": "bilibiliHotKey/23.jpg",
         "知识盲区": "bilibiliHotKey/24.jpg",
         "我全都要": "bilibiliHotKey/25.jpg",
         "咕咕咕": "bilibiliHotKey/26.jpg",
         "可以": "bilibiliHotKey/27.jpg",
         "真香": "bilibiliHotKey/28.jpg",
         "完结": "bilibiliHotKey/29.jpg",
         "有生之年": "bilibiliHotKey/30.jpg",
         "大师球": "bilibiliHotKey/31.jpg",
         "爷关更": "bilibiliHotKey/32.jpg",
            
            
          },
        });
      </script>


   
      
      <!-- 今日诗词：随机返回一句古诗词名句的接口，宅到用来做 Valine 的 placeholder 显示内容 -->
      <!--<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
      <script type="text/javascript">
       jinrishici.load(function(result) {
           var jrsc_plac =  result.data.content + "\n「" + result.data.origin.title + "」" + result.data.origin.dynasty + " · " + result.data.origin.author;
           document.getElementById("veditor").setAttribute("placeholder",jrsc_plac);
       })
      </script>
    </div>-->
    
<!--



-->
  </div>
</div>

        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">文章</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/music/">音乐</a></li>
         
          <li><a href="/photos/">相册</a></li>
         
          <li><a href="/search/">搜索</a></li>
         
          <li><a href="/atom.xml">订阅</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务一</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Apache"><span class="toc-text">安装Apache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置Apache开机自启"><span class="toc-text">设置Apache开机自启</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动Apache"><span class="toc-text">启动Apache</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#发布一个简单的网页"><span class="toc-text">发布一个简单的网页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装PHP"><span class="toc-text">安装PHP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Mysql"><span class="toc-text">安装Mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开机启动"><span class="toc-text">开机启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动服务"><span class="toc-text">启动服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改数据库root用户密码"><span class="toc-text">修改数据库root用户密码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看Mysql的主要配置文件"><span class="toc-text">查看Mysql的主要配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装PHPmyadmin"><span class="toc-text">安装PHPmyadmin</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务二</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置单网卡多IP地址"><span class="toc-text">配置单网卡多IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立网站主目录与主页文件"><span class="toc-text">建立网站主目录与主页文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编辑配置文件"><span class="toc-text">编辑配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试"><span class="toc-text">测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置DNS服务"><span class="toc-text">配置DNS服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#httpd-conf配置文件的组成"><span class="toc-text">httpd.conf配置文件的组成</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务三</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#网站搭建DNS服务器"><span class="toc-text">网站搭建DNS服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑配置文件-v2"><span class="toc-text">编辑配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑区域文件"><span class="toc-text">编辑区域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#建立正向查找域文件"><span class="toc-text">建立正向查找域文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重启服务"><span class="toc-text">重启服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#搭建网站"><span class="toc-text">搭建网站</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建网站主目录和主页文件"><span class="toc-text">创建网站主目录和主页文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑配置文件-v3"><span class="toc-text">编辑配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试-v2"><span class="toc-text">测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务四</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装Apache-SSL支持模块"><span class="toc-text">安装Apache  SSL支持模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生成证书"><span class="toc-text">生成证书</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试HTTPS访问结果"><span class="toc-text">测试HTTPS访问结果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#强制apache-web服务器始终使用https"><span class="toc-text">强制apache web服务器始终使用https</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#null"><span class="toc-text">任务五</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#建立相关目录及文件"><span class="toc-text">建立相关目录及文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立允许访问认证网站的用户"><span class="toc-text">建立允许访问认证网站的用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置http-conf文件"><span class="toc-text">配置http.conf文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试-v3"><span class="toc-text">测试</span></a></li></ol></li></ol>
    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <br><br>
<footer id="footer" class="content">
  
  
    <div  class="container " >
      <!--相关登录 start-->
        <!--弹出微信二维码 start-->
        <!--
        <div id="WechatImg" style="cursor:pointer;">
          <img src="http://images.xiaowiba.com/2018/12/904156446.png" alt="contact" style="width:300px;height:150px;"></img>
      </div>
      <script>
      function showWechat(){
          document.getElementById("WechatImg").style.display = 'block';
      }
      function hideWechat(){
          document.getElementById("WechatImg").style.display = 'none';
      }
      </script>-->
    <!--弹出微信二维码 end-->
    <!--onMouseOut="hideWechat()" onmouseover="showWechat()"-->
    <!--这段借鉴(抄袭)小尾巴http://xiaowiba.com/的-->
    
    <span class="shaky copyrightnota"  style="font-family:'Comic Sans MS';">
      <p id="shakywechat">(●'◡'●)ﾉ♥</p>
      
    </span>
    &nbsp;&nbsp;
    <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
        <script>
            var now = new Date(); 
            function createtime() { 
                var grt= new Date("12/30/2018 12:49:00");//此处修改你的建站时间或者网站上线时间 
                now.setTime(now.getTime()+250); 
                days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                document.getElementById("timeDate").innerHTML = "已存活 "+dnum+" 天 "; 
                document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
            } 
        setInterval("createtime()",250);
        </script>
        
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
       
          <i class="fa fa-user"></i> 访问人数
          <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
        
        <i class="far fa-eye fa-fw"></i>访问总量:
        <span id="busuanzi_value_site_pv"></span>次
  </div>



  

  


</footer>

    

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/first-party/blog-branding/style.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">
<link rel="stylesheet" href="/lib/video.js/video-js.min.css"> 

    <!-- jQuery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- Search -->



<!-- Google Analytics -->

  <script type="text/javascript">
    (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-153778851-3', 'auto');
    ga('send', 'pageview');
  </script>


<!-- Baidu Analytics -->


<!-- Share.js -->

  <script src="/lib/share-js/js/jquery.qrcode.min.js"></script> 
  <script src="/lib/share-js/js/jquery.share.min.js"></script> 
  <script>
    $(function() {
      $('.share-js-component').share({
        sites: ["weibo","wechat","facebook","twitter"] 
      });
    });
  </script>


<!-- lightbox -->

  <script src="/lib/lightbox2/js/lightbox.min.js"></script> 
  <script>
    $(function() {
      lightbox.option({
        albumLabel: '第 %1 / %2 张',	
      })
      $('article img').each(function() {
        $(this).wrap(`<a href="${this.src}" data-lightbox="lightbox-blogpost" data-title="${this.title}" data-alt="${this.alt}"></a>`);
      })
    })
  </script>


<!-- video.js -->

  <script src="/lib/video.js/video.min.js"></script> 


<script src="/js/heart.js"></script>
<script src="/js/crash_cheat.js"></script>
<script src="/js/write.js"></script>




   
<div class="weixin-box" >
    <div class="weixin-menu">
      <div class="weixin-hover">
        <div class="weixin-description">扫码加我微信</div>
      </div>
    </div>
  </div>

    <!-- weather -->
<script type="text/javascript">
  WIDGET = {FID: 'g8PQ2D8Fng'}
  </script>
  <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
  <!--输入框特效-->
  <script>
  POWERMODE.colorful = true;
  POWERMODE.shake = false; 
  document.body.addEventListener('input', POWERMODE);
  </script>

  <!--qsmg酱-->
  <!--
  <script>
    var title2="msg=又有新评论啦~！--by Valine\n"
  var SCKEY_Qmsg="https://qmsg.zendee.cn:443/send/51832cdbaadc85522506ec08ee1ee3b0.html"
  var ValineButton=document.getElementsByClassName("vsubmit vbtn")[0];
  function send_valine_Qmsg(){
    var pagename=document.title;
    var wz=pagename.indexOf('|');
    var res=pagename.substring(0,wz);
    var pageurl=document.URL;
    var ptime=new Date();
    var vnick=document.getElementsByClassName("vnick vinput")[0].value;
    var vmail=document.getElementsByClassName("vmail vinput")[0].value;
    var vlink=document.getElementsByClassName("vlink vinput")[0].value;
    var veditor=document.getElementsByClassName("veditor vinput")[0].value;
    var data="昵称："+vnick+"\n邮箱："+vmail+"\n网站地址："+vlink+"\n当前页面："+pagename+"\n评论内容："+veditor+"\n跳转链接："+pageurl+"\n评论时间"+ptime.toLocaleString();
    var httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
    httpRequest.open('POST',SCKEY_Qmsg, true); //第二步：打开连接
    httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
    httpRequest.send(title2+data);//发送请求 将情头体写在send中
};
ValineButton.onclick=send_valine_Qmsg;

  </script>
  -->
<!--server酱-->

  <script>
    var title1="text=又有新评论啦~！--by Valine"
var SCKEY_Server="SCU106244T73af1259b7c15e029e4e9ef596dcfd0a5f1312913045a"
var ValineButton=document.getElementsByClassName("vsubmit vbtn")[0];
function send_valine_Server(){
    var text="desp=";
    var pagename=document.title;
    var wz=pagename.indexOf('|');
    var res=pagename.substring(0,wz);
    var pageurl=document.URL;
    var ptime=new Date();
    var vnick=document.getElementsByClassName("vnick vinput")[0].value;
    var vmail=document.getElementsByClassName("vmail vinput")[0].value;
    var vlink=document.getElementsByClassName("vlink vinput")[0].value;
    var veditor=document.getElementsByClassName("veditor vinput")[0].value;
    var data=text+"|昵称："+"|邮箱："+"|网站地址："+"|当前页面："+"|评论内容："+"|跳转链接："+"|评论时间"+"\n"+"|----|----|----|----|"+"\n"+"|   "+vnick+"   |   "+vmail+"  |  "+vlink+"|   "+res+"| "+veditor+"| "+pageurl+"|" +ptime.toLocaleString()+"|";
    var httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
    httpRequest.open('POST', 'https://sc.ftqq.com/'+SCKEY_Server+'.send', true); //第二步：打开连接
    httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
    httpRequest.send(title1+"&"+data);//发送请求 将情头体写在send中
};
ValineButton.onclick=send_valine_Server;
  </script>
 <!--屏蔽F12审查元素-->
 <script>
  document.onkeydown = function(){
  
      if(window.event && window.event.keyCode == 123) {
          event.keyCode=0;
          event.returnValue=false;
      }
      if(window.event && window.event.keyCode == 13) {
          window.event.keyCode = 505;
      }
      if(window.event && window.event.keyCode == 8) {
          alert(str+"\n请使用Del键进行字符的删除操作！");
          window.event.returnValue=false;
      }
  
  }
  </script>
  <!--屏蔽右键菜单-->
  <script>
  document.oncontextmenu = function (event){
    if(window.event){
      event = window.event;
    }try{
      var the = event.srcElement;
      if (!((the.tagName == "INPUT" && the.type.toLowerCase() == "text") || the.tagName == "TEXTAREA")){
        return false;
      }
        return true;
      }catch (e){
        return false;
      }
  }
  </script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body>
</html>
